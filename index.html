<!DOCTYPE html>
<html lang="en">
<head>
	<title>space</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/3.0.5/daterangepicker.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<body class="animsition">
	<header >
		<div class="wrap-menu-header gradient1 trans-0-4" >
			<div class="container h-full">
				<div class="wrap_header trans-0-3" style=" display: flex; justify-content: center; align-items: center;">
					<div class="wrap_menu p-l-45 p-l-0-xl" ">
						<nav class="menu ">
							<ul class="main_menu ">
								<li>
									<a href="#section-1">Главная</a>
								</li>

								<li>
									<a href="#section-2">Почему мы?</a>
								</li>

								<li>
									<a href="#section-3">Товары</a>
								</li>

								<li>
									<a href="#section-4">Лекции</a>
								</li>

								<li>
									<a href="#section-5">Контакты</a>
								</li>
							</ul>
						</nav>
					</div>
					<div class="flex-w flex-l-m p-r-20">
						<button class="btn-show-sidebar m-l-33 trans-0-4"></button>
					</div>
				</div>
			</div>
		</div>
	</header>

	<aside class="sidebar trans-0-4">
		<button class="btn-hide-sidebar ti-close color0-hov trans-0-4"></button>
		<ul class="menu-sidebar p-t-95 p-b-70">
			<li class="t-center m-b-13">
				<a href="#section-1" class="txt19">Главная</a>
			</li>

			<li class="t-center m-b-13">
				<a href="#section-2" class="txt19">Почему мы?</a>
			</li>

			<li class="t-center m-b-13">
				<a href="#section-3" class="txt19" >Товары</a>
			</li>

			<li class="t-center m-b-13">
				<a href="#section-4" class="txt19">Лекции</a>
			</li>

			<li class="t-center m-b-13">
				<a href="#section-5" class="txt19">Контакты</a>
			</li>

		</ul>
	</aside>


	<section class="section-slide" id="section-1">
		<div class="wrap-slick1 ">
			<div class="slick1">
				<div class="item-slick1 item1-slick1 parallax100" style="background-image: url(images/slide1-01.jpeg);">
					<div class="wrap-content-slide1 sizefull flex-col-c-m p-l-15 p-r-15 p-t-150 p-b-170">
						<h2 class="caption2-slide1 tit1 t-center animated visible-false m-b-37" data-appear="fadeInUp" style="font-family: Montserrat; ">
							Погрузись в бескрайние <br> просторы космоса
						</h2>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="section-intro" id="section-2">
		<div class="content-intro bg-white p-t-77 p-b-50">
			<div class="container">
				<div class="row">
					<div class="col-md-4 p-t-30">
						<div class="blo1">
							<div class="wrap-pic-blo1 bo-rad-10 hov-img-zoom">
								<a href="#"><img src="images/intro-02-2.jpg" alt="IMG-INTRO"></a>
							</div>

							<div class="wrap-text-blo1 p-t-35">
								<a href="#"><h4 class="txt5 color0-hov trans-0-4 m-b-13">
									Единственная обсерватория внутри города
								</h4></a>

								<p class="m-b-20">
									Наша обсерватория является уникальным местом в городе, где вы можете погрузиться в мир астрономии прямо здесь, не покидая его пределов.
								</p>

								<a href="#" class="txt4">
									Купить билеты
									<i class="fa fa-long-arrow-right m-l-10" aria-hidden="true"></i>
								</a>
							</div>
						</div>
					</div>

					<div class="col-md-4 p-t-30">
						<div class="blo1">
							<div class="wrap-pic-blo1 bo-rad-10 hov-img-zoom">
								<a href="#"><img src="images/intro-01-1.jpg" alt="IMG-INTRO"></a>
							</div>

							<div class="wrap-text-blo1 p-t-35">
								<a href="#"><h4 class="txt5 color0-hov trans-0-4 m-b-13">
									Интерактивные лекции и наблюдения
								</h4></a>

								<p class="m-b-20">
									Помимо уникального местоположения, мы предлагаем интерактивные лекции и наблюдения за космосом.
								</p>

								<a href="#" class="txt4">
									Купить билеты
									<i class="fa fa-long-arrow-right m-l-10" aria-hidden="true"></i>
								</a>
							</div>
						</div>
					</div>

					<div class="col-md-4 p-t-30">
						<div class="blo1">
							<div class="wrap-pic-blo1 bo-rad-10 hov-img-zoom">
								<a href="#"><img src="images/intro-01-3.jpg" alt="IMG-INTRO"></a>
							</div>

							<div class="wrap-text-blo1 p-t-35">
								<a href="#"><h4 class="txt5 color0-hov trans-0-4 m-b-13">
									Разнообразие телескопов для наблюдений
								</h4></a>

								<p class="m-b-20">
									Наша обсерватория является уникальным местом в городе, где вы можете погрузиться в мир астрономии прямо здесь, не покидая его пределов.
								</p>

								<a href="#" class="txt4">
									Купить билеты
									<i class="fa fa-long-arrow-right m-l-10" aria-hidden="true"></i>
								</a>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
		<!-- <div class="header-intro parallax100 t-center p-t-135 p-b-158" style="background-image: url(images/bg-intro-01.jpg);"><span class="tit2 p-l-15 p-r-15"></span><h3 class="tit4 t-center p-l-15 p-r-15 p-t-3"></h3></div> -->
	</section>

	<section class="section-ourmenu bg2-pattern p-t-15 p-b-120" id="section-3" >
		<div class="container">
			<div class="title-section-ourmenu t-center m-b-22">
				<h3 class="tit5 t-center m-t-2">
					Наши товары
				</h3>
			</div>
	
			<div class="wrap-gallery isotope-grid flex-w p-l-25 p-r-25" id="gallery">
				<!-- Элементы галереи будут созданы динамически с помощью JavaScript -->
			</div>
		</div>
	</section>

    <section class="section-event" id="section-4">
        <div class="wrap-slick2">
            <div class="slick2">
                <div class="item-slick2 item1-slick2" style="background-image: url(images/bg-event-01.jpg);">
                    <div class="wrap-content-slide2 p-t-115 p-b-208">
                        <div class="container">
                            <div class="title-event t-center m-b-52">
                                <h3 class="tit6 t-center p-l-15 p-r-15 p-t-3">
                                    Лекции & посещение
                                </h3>
                            </div>

                            <div class="blo2 flex-w flex-str flex-col-c-m-lg animated visible-false" data-appear="zoomIn">
                                <a href="#" class="wrap-pic-blo2 bg1-blo2" style="background-image: url(images/event-02.jpg);">
                                    <div class="time-event size10 txt6 effect1">
                                        <span class="txt-effect1 flex-c-m t-center">
                                            запись
                                        </span>
                                    </div>
                                </a>

                                <div class="wrap-text-blo2 flex-col-c-m p-l-40 p-r-40 p-t-45 p-b-30">
                                    <h4 class="tit7 t-center m-b-10">
                                        19:30 - 22:30
                                    </h4>

                                    <p class="t-center">
                                        Вы оплачиваете символичную сумму 500 тенге за посещение купола на одного человека и посещать с 19:30 по 22:30
                                        Точное время лекции можете уточнить по номерам
                                    </p>

                                    <div class="flex-sa-m flex-w w-full m-t-40" id="timer">
                                        <!-- Elements for the timer will be added here -->
                                        <div class="size11 flex-col-c-m">
                                            <span class="dis-block t-center txt7 m-b-2 hours"></span>
                                            <span class="dis-block t-center txt8">Hours</span>
                                        </div>

                                        <div class="size11 flex-col-c-m">
                                            <span class="dis-block t-center txt7 m-b-2 minutes"></span>
                                            <span class="dis-block t-center txt8">Minutes</span>
                                        </div>

                                        <div class="size11 flex-col-c-m">
                                            <span class="dis-block t-center txt7 m-b-2 seconds"></span>
                                            <span class="dis-block t-center txt8">Seconds</span>
                                        </div>
                                    </div>

                                    <a href="#" class="txt4 m-t-40">
                                        Записаться
                                        <i class="fa fa-long-arrow-right m-l-10" aria-hidden="true"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
	
	



	<section class="section-booking bg1-pattern p-t-100 p-b-110">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 p-b-30">
					<div class="t-center">
						<h3 class="tit3 t-center m-b-35 m-t-2">
							Регистрация
						</h3>
					</div>

					<form class="wrap-form-booking" id="booking-form">
						<div class="row">
							<div class="col-md-6">
								<!-- Date -->
								<span class="txt9">Дата</span>
								<div class="wrap-inputdate pos-relative txt10 size12 bo2 bo-rad-10 m-t-3 m-b-23">
									<input class="my-calendar bo-rad-10 sizefull txt10 p-l-20" type="text" name="date" required>
									<i class="btn-calendar fa fa-calendar ab-r-m hov-pointer m-r-18" aria-hidden="true"></i>
								</div>
					
								<!-- Name -->
								<span class="txt9">Имя</span>
								<div class="wrap-inputname size12 bo2 bo-rad-10 m-t-3 m-b-23">
									<input class="bo-rad-10 sizefull txt10 p-l-20" type="text" name="name" placeholder="Имя" required>
								</div>
					
								<!-- Phone -->
								<span class="txt9">Телефон</span>
								<div class="wrap-inputphone size12 bo2 bo-rad-10 m-t-3 m-b-23">
									<input class="bo-rad-10 sizefull txt10 p-l-20" type="text" name="phone" placeholder="Телефон" required>
								</div>
					
								<!-- Number of Tickets -->
								<span class="txt9">Количество билетов</span>
								<div class="wrap-inputphone size12 bo2 bo-rad-10 m-t-3 m-b-23">
									<input class="bo-rad-10 sizefull txt10 p-l-20" type="number" name="tickets" id="tickets" min="1" placeholder="Количество билетов" required>
								</div>
					
								<!-- Product Selection -->
								<span class="txt9">Выбор товара</span>
								<div class="wrap-select size12 bo2 bo-rad-10 m-t-3 m-b-23">
									<select class="bo-rad-10 sizefull txt10 p-l-20" id="product">
										<option value="">Выберите товар</option>
										<!-- Здесь будут варианты товаров из gallery.json -->
									</select>
								</div>
							</div>
					
							<div class="col-md-6" style="display: none;" id="total-price-wrapper">
								<label class="txt9">Сумма к оплате:</label>
								<div class="wrap-total-price size12 bo2 bo-rad-10 m-t-3 m-b-23">
									<input class="bo-rad-10 sizefull txt10 p-l-20" type="text" name="total-price" id="total-price" readonly>
								</div>
								<div class="m-t-20">
									<label class="txt9">Выберите способ оплаты:</label>
									<div class="wrap-payment-buttons flex-c-m m-t-6">
										<button type="button" class="btn3 flex-c-m size13 txt11 trans-0-4" id="pay-kaspi">Kaspi</button>
										<button type="button" class="btn3 flex-c-m size13 txt11 trans-0-4" id="show-kaspi-qr">Kaspi QR</button>
									</div>
									<div id="kaspi-qr-popup" class="kaspi-qr-popup">
										<button id="close-popup-btn"><i class="fas fa-times"></i></button>
										<div class="col-md-4" id="card-1">
											<div class="card">
												<div class="card-body">
													<div class="block_header" style="display: flex; align-items: center;">
														<img src="https://kaspi.kz/pay/img/qr_block_logo.svg" class="block_header_logo" alt="">
														<p class="block_header_title">Kaspi QR</p>
													</div>
													<div class="block_text" data-locale-text="text">Сканируйте и платите</div>
												</div>
												<div class="block_qr" id="qrcode">
													<div class="logo"></div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					
						<div class="wrap-btn-booking flex-c-m m-t-6">
							<button type="submit" class="btn3 flex-c-m size13 txt11 trans-0-4" id="submit-btn">
								Записаться
							</button>
						</div>
					</form>
					
				</div>

			</div>
		</div>
	</section>

	<footer class="bg1" id="section-5" >
		<div class="container p-t-20 p-b-20">
			<div class="row">
				<div class="col-sm-12 col-md-12 p-t-30">
					<h4 class="txt13 m-b-33">
						Наши контакты
					</h4>

					<ul class="m-b-70" style="display: flex; flex-direction: row; align-items: center; justify-content: space-between;">
						<li class="txt14 m-b-14">
							<i class="fa fa-map-marker fs-16 dis-inline-block size19" aria-hidden="true"></i>
							Аль-фараби 71/27
						</li>

						<li class="txt14 m-b-14">
							<i class="fa fa-phone fs-16 dis-inline-block size19" aria-hidden="true"></i>
							+7 708 385 8570
						</li>

						<li class="txt14 m-b-14">
							<i class="fa fa-calendar fs-13 dis-inline-block size19" aria-hidden="true"></i>
							19:30 - 22:30 
						</li>
					</ul>
				</div>
			</div>
		</div>


	</footer>



	<div class="btn-back-to-top bg0-hov" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="fa fa-angle-double-up" aria-hidden="true"></i>
		</span>
	</div>






	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/animsition/3.2.1/js/animsition.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/2.1.25/daterangepicker.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
	<script src="js/main.js"></script>

	






<script>
	document.getElementById('show-kaspi-qr').addEventListener('click', async function() {
		document.getElementById('kaspi-qr-popup').style.display = 'flex';
		const totalPriceInput = document.getElementById('total-price');
		const totalPrice = totalPriceInput.value;
		const id = await generateQRCode(totalPrice);
		checkPaymentStatus(id);
	});

	document.getElementById('pay-kaspi').addEventListener('click', async function() {
		const totalPriceInput = document.getElementById('total-price');
		const totalPrice = totalPriceInput.value;
		const id = await generatePayLink(totalPrice);
		if (id) {
			checkPaymentStatus(id);
		}
	});

	async function generatePayLink(price) {
		try {
			const url = `https://nscomp.kz/neword/48/${price}`;
			const response = await fetch(url);
			const data = await response.json();
			const id = data.id;
			const qrCodeUrl = `https://kaspi.kz/pay/NSCompany?service_id=6692&10661=${id}`;
			const payBtn = document.getElementById('pay-kaspi');
			payBtn.onclick = function() { 
				window.open(qrCodeUrl);
			};
			return id;
		} catch (error) {
			console.error("Ошибка запроса:", error);
			return null;
		}
	}


	async function generateQRCode(price) {
		try {
			const url = `https://nscomp.kz/neword/48/${price}`;
			const response = await fetch(url);
			const data = await response.json();
			const id = data.id;
			const qrCodeUrl = `https://kaspi.kz/pay/NSCompany?service_id=6692&10661=${id}`;
			const payBtn = getElementById('pay-kaspi')
			payBtn.onclick = function() { 
				window.open(qrCodeUrl);
			}

			const qrBlock = document.getElementById('qrcode');
			qrBlock.innerHTML = '';

			// Создаем QR-код
			const qrcode = new QRCode(qrBlock, {
				text: qrCodeUrl,
				width: 300,
				height: 300,
				colorDark: '#000',
				colorLight: '#fff',
				correctLevel: QRCode.CorrectLevel.H
			});

			// Создаем логотип
			const logo = document.createElement('div');
			logo.className = 'logo';
			logo.innerHTML = '<img src="https://firebasestorage.googleapis.com/v0/b/forpay-9f645.appspot.com/o/1%2Flogo.png?alt=media&token=e83b5089-a86b-4db6-bb70-d0e830dc8e8c" alt="">';

			// Помещаем логотип в блок с QR-кодом
			qrBlock.appendChild(logo);

			return id;

		} catch (error) {
			console.error("Ошибка запроса:", error);
			return null;
		}
	}

	async function checkPaymentStatus(id) {
		let count = 0;
		const interval = setInterval(async () => {
			try {
				const url = `https://nscomp.kz/checkord/${id}`;
				const response = await fetch(url);
				const data = await response.json();

				if (data === true) {
					clearInterval(interval);
					document.getElementById('kaspi-qr-popup').style.display = 'none';
					alert("Поздравляем, мы приняли ваш заказ. Ждем вас!");
				} else if (++count >= 150) { // 150 * 2 секунд = 5 минут
					clearInterval(interval);
					document.getElementById('kaspi-qr-popup').style.display = 'none';
				}
			} catch (error) {
				console.error("Ошибка проверки статуса оплаты:", error);
			}
		}, 2000);
	}

</script>












</body>
</html>
